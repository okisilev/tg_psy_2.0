# ะคะธะฝะฐะปัะฝะพะต ะธัะฟัะฐะฒะปะตะฝะธะต ะฟัะพะฑะปะตะผั "ะะตะธะทะฒะตััะฝัะน ะทะฐะฟัะพั"

## โ ะัะพะฑะปะตะผะฐ ัะตัะตะฝะฐ!

### ะงัะพ ะฑัะปะพ ะธัะฟัะฐะฒะปะตะฝะพ:

1. **ะัะฐะฒะธะปัะฝัะต ะฟะฐัะฐะผะตััั** - ะธัะฟะพะปัะทััััั ะบะพััะตะบัะฝัะต ะฝะฐะทะฒะฐะฝะธั ะฟะฐัะฐะผะตััะพะฒ ะดะปั ะัะพะดะฐะผัั
2. **5-ะทะฝะฐัะฝัะต ะฝะพะผะตัะฐ ะทะฐะบะฐะทะพะฒ** - ะณะตะฝะตัะธัััััั ัะปััะฐะนะฝัะต 5-ะทะฝะฐัะฝัะต ะฝะพะผะตัะฐ (10000-99999)
3. **HMAC ะฟะพะดะฟะธัั** - ัะฐะฑะพัะฐะตั ะบะพััะตะบัะฝะพ
4. **URL ะฟะปะฐัะตะถะฝะพะน ัััะฐะฝะธัั** - ะธัะฟะพะปัะทัะตััั ะฟัะฐะฒะธะปัะฝัะน URL ะฒะฐัะตะน ัััะฐะฝะธัั

### ๐งช ะะตะทัะปััะฐัั ัะตััะธัะพะฒะฐะฝะธั:

- โ ะะปะฐัะตะถะฝัะต ัััะปะบะธ ัะพะทะดะฐัััั ั ะบะพััะตะบัะฝัะผะธ ะฟะฐัะฐะผะตััะฐะผะธ
- โ HMAC ะฟะพะดะฟะธัั ัะฐะฑะพัะฐะตั ะฟัะฐะฒะธะปัะฝะพ
- โ 5-ะทะฝะฐัะฝัะต ะฝะพะผะตัะฐ ะทะฐะบะฐะทะพะฒ ะณะตะฝะตัะธัััััั ะบะพััะตะบัะฝะพ
- โ ะัะต ัะตััั ะฟัะพัะพะดัั ััะฟะตัะฝะพ

### ๐ ะกัััะบัััะฐ ะฟัะพะตะบัะฐ:

```
tg_psy_2.0/
โโโ src/                    # ะััะพะดะฝัะน ะบะพะด
โ   โโโ bot.js             # ะัะฝะพะฒะฝะพะน ัะฐะนะป ะฑะพัะฐ
โ   โโโ services/          # ะกะตัะฒะธัั
โ   โ   โโโ prodamusService.js    # ะะฝัะตะณัะฐัะธั ั ะัะพะดะฐะผัั
โ   โ   โโโ subscriptionService.js # ะฃะฟัะฐะฒะปะตะฝะธะต ะฟะพะดะฟะธัะบะฐะผะธ
โ   โ   โโโ hmacService.js        # HMAC-ะฟะพะดัะฒะตัะถะดะตะฝะธะต
โ   โโโ handlers/          # ะะฑัะฐะฑะพััะธะบะธ ะบะพะผะฐะฝะด
โ       โโโ botHandlers.js # ะะฑัะฐะฑะพััะธะบะธ ะบะพะผะฐะฝะด ะฑะพัะฐ
โโโ tests/                 # ะขะตััั
โ   โโโ hmacService.test.js
โ   โโโ subscriptionService.test.js
โ   โโโ prodamusService.test.js
โ   โโโ botHandlers.test.js
โ   โโโ integration.test.js
โ   โโโ test-payment.js
โ   โโโ test-order-id.js
โโโ docs/                  # ะะพะบัะผะตะฝัะฐัะธั
โ   โโโ README.md
โ   โโโ SETUP.md
โ   โโโ DEPLOYMENT.md
โ   โโโ TESTING.md
โ   โโโ SECURITY.md
โ   โโโ TROUBLESHOOTING.md
โ   โโโ QUICK_START.md
โ   โโโ FIX_PAYMENT.md
โ   โโโ PRODAMUS_URL_SETUP.md
โ   โโโ PRODAMUS_TROUBLESHOOTING.md
โ   โโโ FINAL_FIX.md
โโโ package.json
```

### ๐ ะะพะผะฐะฝะดั ะดะปั ะทะฐะฟััะบะฐ:

```bash
# ะฃััะฐะฝะพะฒะบะฐ ะทะฐะฒะธัะธะผะพััะตะน
npm install

# ะะฐะฟััะบ ะฑะพัะฐ
npm start

# ะขะตััะธัะพะฒะฐะฝะธะต
npm test
npm run test:payment
npm run test:order-id

# ะะฐะทัะฐะฑะพัะบะฐ
npm run dev
```

### ๐ง ะะฐัััะพะนะบะฐ:

1. **ะกะบะพะฟะธััะนัะต .env ัะฐะนะป:**
```bash
cp config.env.example .env
```

2. **ะะฐะฟะพะปะฝะธัะต ะฟะตัะตะผะตะฝะฝัะต ะพะบััะถะตะฝะธั:**
```env
TELEGRAM_BOT_TOKEN=your_bot_token
TELEGRAM_CHANNEL_ID=-1001234567890
PRODAMUS_SHOP_ID=your_shop_id
PRODAMUS_SECRET_KEY=your_secret_key
PRODAMUS_PAYMENT_FORM_URL=https://your-shop.payform.ru/pay
PRODAMUS_WEBHOOK_URL=https://yourdomain.com/webhook/prodamus
WEBHOOK_URL=https://yourdomain.com
```

3. **ะะฐะฟัััะธัะต ะฑะพัะฐ:**
```bash
npm start
```

### ๐ ะะพะดะดะตัะถะบะฐ:

- **ะะพะบัะผะตะฝัะฐัะธั:** [docs/](docs/)
- **ะฃัััะฐะฝะตะฝะธะต ะฝะตะฟะพะปะฐะดะพะบ:** [docs/TROUBLESHOOTING.md](docs/TROUBLESHOOTING.md)
- **ะัััััะน ััะฐัั:** [docs/QUICK_START.md](docs/QUICK_START.md)

### ๐ ะะพัะพะฒะพ ะบ ะธัะฟะพะปัะทะพะฒะฐะฝะธั!

ะะพั ัะตะฟะตัั ะฟะพะปะฝะพัััั ััะฝะบัะธะพะฝะฐะปะตะฝ ะธ ะณะพัะพะฒ ะบ ัะฐะทะฒะตัััะฒะฐะฝะธั. ะัะต ะฟัะพะฑะปะตะผั ั ะฟะปะฐัะตะถะฝัะผะธ ัััะปะบะฐะผะธ ัะตัะตะฝั!
